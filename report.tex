%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%%  LaTeX + CJK ģ�壬ֻ��� A4 ֽ������Paper��
%%
%%  Ver 1.02 By DeathKing @ <dk.hit.edu.cn>
%%  Ver 1.01 By rabbitbug @ www.ctex.org
%%  Ver 1.0 by oLo @ bbs.ustc.edu.cn
%%
%%  You can mofify it and distribute it freely:)
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  ����ģ�壺A4 ֽ��С���֣����У��ɸ���Ҫ���˫�� twocolumn��
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass[a4paper,11pt,onecolumn,twoside]{article}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  packages
%    �ⲿ��������Ҫ�õ��İ�
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{CJK}         % CJK ����֧��
\usepackage{fancyhdr}
\usepackage{amsmath,amsfonts,amssymb,graphicx}    % EPS ͼƬ֧��
\usepackage{subfigure}   % ʹ����ͼ��
\usepackage{indentfirst} % ���Ķ�����������
\usepackage{bm}          % ��ʽ�еĴ����ַ���������\boldsymbol��
\usepackage{multicol}    % ����˫��
\usepackage{indentfirst} % �����׶�����
% \usepackage{picins}      % ͼƬǶ������� ������Ƭ
\usepackage{abstract}    % 2���ĵ���һ��ժҪ���ؼ��ֺ��
\usepackage{stfloats}
\usepackage{enumerate}
\usepackage{enumitem}
\usepackage{float}
\usepackage{multirow}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  lengths
%    ����������ض���ҳ��߾࣬ʹ��������Ŀ���ϰ�ߡ�
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\addtolength{\topmargin}{-54pt}
\setlength{\oddsidemargin}{-0.9cm}  % 3.17cm - 1 inch
\setlength{\evensidemargin}{\oddsidemargin}
\setlength{\textwidth}{17.00cm}
\setlength{\textheight}{24.00cm}    % 24.62
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  ��������ʽ������title��author��affiliation��email�ȡ�
%  ���κ��õ����ĵĵط�����\begin{CJK} ... \end{CJK}������������
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\renewcommand{\baselinestretch}{1.1} %�����м��
\parindent 22pt %���¶�����������

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ���⣬���ߣ�ͨ�ŵ�ַ����
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{CJK}{GBK}{song}
\title{\huge{Final Report}} %\thanks{�ո�����:~XXXX$-$XX$-$XX. ������Ŀ��������Ȼ��ѧ����������Ŀ~(51685168)}}
\author{Minghao Li, Huidong Lin, Wenyu Huang, Jingchao Yu\\[2pt]
}
\date{}  % ��һ������ȥ��Ĭ�ϵ�������ʾ
\end{CJK}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ��ҳҳüҳ�Ŷ���
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\fancypagestyle{plain}{
%\fancyhf{}
%\lhead{��~XX~��\quad ��~X~��\\
%\scriptsize{XXXX~��~XX~��}}
%\chead{\centering{��~~��~~ȡ~~��~~��\\
%\scriptsize{\textbf{The trip to get the Sutra}}}}
%\rhead{Vol. XX, No. XX\\
%\scriptsize{October, 2004}}
%\lfoot{}
%\cfoot{}
%\rfoot{}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ��ҳ�������żҳ��ͬ����ҳüҳ��
% R,C,L�ֱ���������ң�O,E������żҳ
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\pagestyle{fancy}
%\fancyhf{}
%\fancyhead[RE]{��~XX~��}
%\fancyhead[CE]{��~~��~~ȡ~~��~~��}
%\fancyhead[LE,RO]{\thepage}
%\fancyhead[CO]{��~~��ȣ���ĸ��������������������̷��������}
%\fancyhead[LO]{��~X~��}
%\lfoot{}
%\cfoot{}
%\rfoot{}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ������������������float���������� figure, table���������¶���
% figure��ʹ֮���Ը���������Ҫ��λ�á�tableҲͬ������figure��Ϊ
% table�Ϳ��ԡ�
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newenvironment{figurehere}
  {\def\@captype{figure}}
  {}
\makeatother


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  ��������
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
\begin{CJK*}{GBK}{song}
% \CJKcaption{GB}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  �Զ�������
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ����ʹ�����������ϱ���ʽ��ʾ
\newcommand{\supercite}[1]{\textsuperscript{\cite{#1}}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  ��ʾtitle������ҳ��Ϊ�գ�����־��Ҫ��
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\maketitle

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  ����ժҪ
%  ����ժҪ���ؼ��ʣ���ͼ����ŵ�ҳ�߾�
%  ��Ӣ��ͬʱ����
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setlength{\oddsidemargin}{ 1cm}  % 3.17cm - 1 inch
\setlength{\evensidemargin}{\oddsidemargin}
\setlength{\textwidth}{13.50cm}
\vspace{-.8cm}
\begin{center}
\parbox{\textwidth}{
\CJKfamily{hei}\textbf{Abstract}\quad \CJKfamily{kai}~Our team choose an 
android application which functions image style transfer. We measure 
the execution time for each part of the application and propose a computation 
partitioning method based on the analysis of data transmission and execution time.
We evaluate the completion time of the proposed method and
the local execution method in both 4G and WIFI network conditions.  
It turns out that the appropriate partitioning method improve the performance
of the application. 
%In our experiments the new system show great performance which means we make a correct design.\\

%\CJKfamily{hei}�ؼ���\quad\CJKfamily{kai}��ң���ĸ������ۣ��칬\\
%\CJKfamily{hei}��ͼ�����\quad TG9527\qquad  \CJKfamily{hei}���ױ�ʶ��\quad A
}
\end{center}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  Ӣ��ժҪ
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\vspace{.1cm}
%\begin{center}
%\parbox{\textwidth}{
%{\large{\textbf{Analysis and simulation of the peaches in the birthday party of lady Wang Mu}}}\\
%\vspace{-0.5cm}
%\begin{center}
%\textbf{Hou Ge, Ba Jie}\\[2pt]
%\small{\textit{(Dept. Qu Jing, New Western Univ., Changan Da Tang 123456, China)}}\\[2pt]
%\end{center}
%{\small{\textbf{Abstract}\quad The peaches in the birthday party of lady Wang Mu were so delicious that I want to dwell on the analysis and simulation on them. So that I can bring some of them to my kids in Hua Guo Shan.\\
%\textbf{Key Words}\quad Peach, lady Wang Mu, birthday party, Heaven palace}}
%}
%\end{center}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  ���±��(���Ͻ�)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \begin{minipage}[c]{10cm}
% \vspace{-35.5cm}
% ���±��~~~~1005$-$0388(2004)05$-$0505$-$04
% \end{minipage}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  �����ɴ˿�ʼ��������������������������������������������������
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  �ָ�����ҳ�߾�
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setlength{\oddsidemargin}{-.5cm}  % 3.17cm - 1 inch
\setlength{\evensidemargin}{\oddsidemargin}
\setlength{\textwidth}{17.00cm}
\CJKfamily{song}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  ������ʼ
% \begin{multicols}{2}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Introduction}
Image style transfer\cite{1508.06576} is a technique used to generate an image
that look like the input content image but in the style of the input
style image with the help of convolutional neural networks(CNN).
The Android application we choose is performing the image 
style-transfer task completely on mobile devices. In the experiments,
we analyze the execution time of each module in the application and 
propose a computation partitioning method in order to improve the 
poor performance of the locally-executed application. We evaluate the
performance of our redesigned application under different network 
conditions.

\section{Our works}
\subsection{Application}
The application allows users to input an image and select the predefined
style image to perform style-transfer on the input image. 

%效果图放这

\subsection{Computation partitioning}

The uses structure of the application is illustrated with Fig~\ref{uses}.

\begin{figure}[!htb] %H为当前位置，!htb为忽略美学标准，htbp为浮动图形
  \centering %图片居中
  \includegraphics[width=0.7\textwidth]{uses} %插入图片，[]中设置图片大小，{}中是图片文件名
  \caption{Uses structure of the app} %最终文档中希望显示的图片标题
  \label{uses} %用于文内引用的标签
\end{figure}

We evaluate the execution time of each procedure of the application
on both mobile devices and a server.
The evaluation time showed in Table \ref{tb:1} indicates that the 
computations about neural network including 
\textit{Tensorflow initiation}
and \textit{Tensorflow inference}\cite{tensorflow2015-whitepaper} 
procedures occupy most of the execution time of the application. 
Intuitively, we intend to allocate the computation
work about neural network to a server where 
the computation has been greatly improved.
The \textit{Rebuilding} parts of input and output image are also
allocated to the server because the byte stream which is transmitted
to the server becomes larger when the image is rebuilded into 
input tensors and it spends more time to rebuild input tensor locally.
Therefore, We consider a computation partitioning method that
allocate \textit{Rebuilding}, \textit{Tensorflow initiation}
  and \textit{Tensorflow inference} parts 
  to a server while other computations tasks to a mobile device.

% On the other hand, the execution time of \textit{Rebuilding} parts 
% are also considered to 
% be computed on a server. In this manner, 
% Considering the 

\begin{table}[H]
  \centering
  \caption{Execution Time on Mobile Devices and Server}\label{tb:1}
  \begin{tabular}{ccc}
    \hline
    procedure & execution time on mobile devices(avg) & execution time on server\\
    \hline
    Tensorflow initiation & 351ms & 228ms\\
    
    Image scaling & 28ms & 11ms\\
    
    Rebuild input tensor & 252ms & 103ms\\
    
    Tensorflow inference & 9920ms & 6960ms\\
    
    Rebuild output image & 220ms & 88ms\\
    \hline
  \end{tabular}
\end{table}


% \begin{enumerate}[label=\textbf{Method \arabic*}, align=left]
%   \item Allocate \textit{Rebuilding}, \textit{Tensorflow initiation}
%   and \textit{Tensorflow inference} parts 
%   to a server while other computations tasks to a mobile device.
%   \item Allocate \textit{Tensorflow initiation}
%   and \textit{Tensorflow inference} parts to a server and 
%   other computation tasks to a mobile device.
% \end{enumerate}

\subsection{System Design and Architecture}

% We choose Client-Server structure as our 
% Component-and-Connector structure which is shown below as Fig~\ref{C&C}:

The Component\&Connector structure of the application 
is presented as Fig~\ref{C&C}, which is a Client-Server structure:

\begin{figure}[!htb] %H为当前位置，!htb为忽略美学标准，htbp为浮动图形
  \centering %图片居中
  \includegraphics[width=0.5\textwidth]{C&C} %插入图片，[]中设置图片大小，{}中是图片文件名
  \caption{Client-Server structure of our application} %最终文档中希望显示的图片标题
  \label{C&C} %用于文内引用的标签
\end{figure}



\section{Experiments and Results}

We compare the local execution and two partitioning methods 
over performance in terms of completion time of the program.
For an overall evaluation under both 4G and WIFI network conditions. 

\begin{table}[!hbt]\label{tb:result}
  \centering
  \begin{tabular}{|c|c|c|}
  \hline
  \multirow{2}{*}{} & \multicolumn{2}{c|}{Network Condition} \\ \cline{2-3} 
                                       & WIFI                & 4G              \\ \hline
  Local execution                      &  12.24s             &  12.24s         \\ \hline
  Partition Method                     &  7.50s              &  7.99s          \\ \hline
  \end{tabular}
  \end{table}

\section{Conclusions}

Our experiments indicates that partitioning by Client-Server structure improves performance a lot when only single client is online.

\section{References}

\nocite{1508.06576}
\nocite{tensorflow2015-whitepaper}

\bibliographystyle{plain}
\bibliography{bibtex} 


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  �ο�����
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\small
%\begin{thebibliography}{99}
%\setlength{\parskip}{0pt}  %����֮�����ֱ����
%\bibitem{Wu}��ж�. ���μ�~[M], ��14XX��.
%\bibitem{Xuan} ����. ���������ѧ��~[J], ��~6XX~��, 1(2): 23-55.

%\end{thebibliography}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ���߼���,�������ͼƬ��picins�����\parpic����
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\normalsize
%\parpic{%
%\includegraphics[width=3.0cm]%
%{Hou.jpg}}
%\indent ��~~��~~($xxx-$)���У����ջ���ɽ�ˣ��������ߣ�����ɮ�Ĵ�ͽ�ܣ�����ʮ���䡢���Ƽ���
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  ��������
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \end{multicols}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  ���½���
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\clearpage
\end{CJK*}
\end{document}
